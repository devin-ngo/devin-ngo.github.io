[
  {
    "path": "posts/2022-03-13-lake/",
    "title": "Data Visualization Practice",
    "description": "Practicing data visualization skills through adding text and other descriptive elements to a graph of Mono Lake Levels",
    "author": [
      {
        "name": "Devin Ngo",
        "url": {}
      }
    ],
    "date": "2022-03-13",
    "categories": [],
    "contents": "\nSetup\n\n\nShow Code\n\n# Read in Mono Lake data\nmono_lake <- read_csv(here(\"_posts\", \"2022-03-13-lake\",\"data\", \"mono_lake_annual_levels.csv\"), skip = 5) %>% \n  clean_names()\n\n\n\nVisualizing Mono Lake Levels\n\n\nShow Code\n\n# Create the most perfect, useful finalized data visualization  \nggplot(data = mono_lake) +\n  geom_line(aes(x = year, y = lake_level_feet_above_sea_level), color = \"lightskyblue3\") +\n  labs(x = \"Year\",\n       y = \"Feet Above Sea Level\") +\n  theme_minimal() +\n  annotate(\"text\", x = 1930, y = 6410, label = \"1941: Los Angeles Department of Water \\n & Power began diverting water\", size = 2, color = \"black\") +\n  geom_segment(aes(x=1850,xend=2017,y=6392,yend=6392), color = \"palegreen3\") +\n  annotate(\"text\", x = 2000, y = 6393, label = \"Stable Level: 6392 Feet\", size = 2, color = \"palegreen3\") +\n  annotate(\"rect\", xmin = 1850, xmax = 2017, ymin = 6360, ymax = 6392, alpha = .2, fill = \"rosybrown1\") +\n  annotate(\"text\", x = 2000, y = 6388, label = \"1980s: Eight lawsuits successfully challenged \\n DWP's water diversions\", size = 2, color = \"black\") +\n  geom_segment(aes(x=1850,xend=2017,y=6377,yend=6377), color = \"tomato3\") +\n  annotate(\"text\", x = 1875, y = 6378, label = \"Land bridges emerge: 6377 Feet\", size = 2, color = \"tomato3\")+\n  geom_segment(aes(x=1850,xend=2017,y=6360,yend=6360), color = \"chocolate1\") +\n  annotate(\"text\", x = 1875, y = 6361, label = \"Decrease in brine shrimp availability: 6360 Feet\", size = 2, color = \"chocolate1\")\n\n\n\n\nFigure 1. The change in Mono Lake levels (feet above sea level) from 1850 to 2017. The green line represents the stable level of 6392 feet above sea level set by Decision 1631 in 1994. This level was chosen to reduce the lake’s salinity, improve air quality by covering the exposed dry lakebed, and protect California Gull nesting islets from predators. The lightly red shaded area indicates the sea levels below this stable level. The red line at 6377 feet above sea level indicates when land bridges emerge between the mainland and islands, leading to predators accessing major bird nesting sites. The orange line at the bottom at 6360 feet above sea level represents when salinity is at 120 g/L, leading to a decrease in brine shrimp availability and thus affecting the birds that feed on them. Data: Mono Basin Clearinghouse (2017).\n\n\n\n",
    "preview": "posts/2022-03-13-lake/lake_files/figure-html5/unnamed-chunk-2-1.png",
    "last_modified": "2022-03-13T17:33:06-07:00",
    "input_file": {}
  },
  {
    "path": "posts/2022-03-13-nls/",
    "title": "Non-Linear Least Squares",
    "description": "Using Non-Linar Least Squares (NLS) analysis on lizards sampled by pitfall traps at the Jornada Basin LTER site to estimate parameters of a length to weight model for lizard popilations.",
    "author": [
      {
        "name": "Devin Ngo",
        "url": {}
      }
    ],
    "date": "2022-03-13",
    "categories": [],
    "contents": "\nOverview\nThis data set contains data on lizards sampled by pitfall traps at 11 consumer plots at Jornada Basin LTER site from 1989 - 2006. This study was conducted to observe how shifts affect the spatial and temporal availability of resources for consumers. The variables measured in this data include species, sex, snout-vent length, total length, and weight. This report uses non-linear least squares (NLS) to estimate parameters of a length to weight model for lizard populations in New Mexico. NLS will be used to look at a model for all species and then for a model for male western whiptail lizards. These models will be compared to see which one is a better fit in predicting lizard weight as a function of snout-to-vent length.\nSetup\n\n\nShow Code\n\nknitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = TRUE)\n\n\n\n\n\nShow Code\n\n# Attached packages:\nlibrary(tidyverse)\nlibrary(here)\nlibrary(Metrics)\nlibrary(purrr)\nlibrary(janitor)\nlibrary(kableExtra)\nlibrary(broom)\nlibrary(modelr)\n\n\n\nData Wrangling\nReading in and wrangling lizards data, as well as adding new columns for log of weight and log of snout to vent length:\n\n\nShow Code\n\n# Reading in data\nlizards <- read_csv(here(\"_posts\", \"2022-03-13-nls\", \"data\", \"lizard.csv\")) %>% \n  clean_names() %>% \n  mutate(sex = case_when(\n    sex == \"M\" ~ \"Male\",\n    sex == \"F\" ~ \"Female\")) %>% \n    mutate(log_weight = log(weight)) %>% #Adding log of weight column \n  mutate(log_length = log(sv_length)) %>%  #Adding log of sv_length column \n  drop_na()\n\n\n\nModel Fit Selection\nIntroducing a snout length to weight model of the following form to the lizards data frame:\n\\[\nW = a(SVL)^b\n\\]\nW is weight (g), SVL is snout to vent length (mm), and a and b are the parameters that need to be fitted.\n\n\nShow Code\n\n# Log transforming the model\nmy_guess_model <- lm(log_weight ~ log_length, data = lizards) \n\n\n\n\n\nShow Code\n\n# Supplying the NLS start list with regression coefficients \ncoef <- coefficients(my_guess_model) \n\n# Creating and storing a function of the weight model\nweight_model <- function(a, sv_length, b){\n  weight = a*(sv_length)^b\n  return(weight)\n}\n\n\n\nNLS Model Results\n\n\nShow Code\n\n# Creating the NLS model \nlizard_nls=nls(weight ~ weight_model (a,sv_length,b),\n               data = lizards,\n               start = list(b = coef[2], \n                            a = exp(coef[1])))\n\n# NLS model results in a table\nnls_tidy <- tidy(lizard_nls) %>% \n  select(-statistic) %>% \n  mutate(p.value = case_when(\n    p.value < 0.001 ~ \"<0.001\")) %>% \n  kable(col.names = c(\"Parameter\", \"Coefficient\", \"Standard Error\", \"P-Value\"),\n        caption = \"Table 1. NLS analysis results for all lizard species. Data includes coefficients for the parameters, standard error, and the p-value.\", \n        digits = 4) %>% \n  kable_styling(full_width = FALSE)\n\nnls_tidy\n\n\n\nTable 1: Table 1. NLS analysis results for all lizard species. Data includes coefficients for the parameters, standard error, and the p-value.\n\n\nParameter\n\n\nCoefficient\n\n\nStandard Error\n\n\nP-Value\n\n\nb\n\n\n2.4532\n\n\n0.027\n\n\n<0.001\n\n\na\n\n\n0.0003\n\n\n0.000\n\n\n<0.001\n\n\nVisualizing the Model Prediction Based on NLS\n\n\nShow Code\n\n# To create model prediction based on NLS\nlizard_augment <- augment(lizard_nls)\n\n# Fitted model on a plot with female and male lizards separated by color \nggplot() +\n  geom_point(data = lizards, aes(\n             x = sv_length,\n             y = weight, \n             color = sex)) +\n  geom_line(data = lizard_augment, aes(\n            x = sv_length,\n            y = .fitted,\n            color = \"Model Prediction\"),\n            size = 1) +\n  scale_color_manual(values = c(\"lightslategray\", \"lightskyblue1\", \"firebrick\")) +\n  labs(x = \"Snout to Vent Length (mm)\", \n       y = \"Weight (g)\", \n       color = \"Legend\") +\n  theme_minimal() +\n  theme(legend.title = element_blank())\n\n\n\n\nFigure 1. Lizard body weight (g) versus snout to vent length (mm) of all lizard species, separated by sex. The red line represents the model prediction based on the NLS model. Data: Lightfoot & Whitford. (2020).\nNLS Model - Male Western Whiptail Lizards\n\n\nShow Code\n\n# Filtering out the dataset for male Western Whiptail lizard (Cnemidophorus tigrisatus) \nmale_whiptails <- lizards %>% \n  filter(spp %in% c(\"CNTI\"), \n         sex %in% c(\"Male\"))\n\n# Log transforming the model for the subset\nguess_male_whip <- lm(log_weight ~ log_length, data = male_whiptails)\n\n# Pulling out regression coefficients \ncoef_male_whip <- coefficients(guess_male_whip) \n\n# Fitting NLS model to the subset \nnls_male_whip <- nls(weight ~ weight_model(a, sv_length, b),\n                     data = male_whiptails,\n                     start = list(b = coef_male_whip[2], \n                                  a = exp(coef_male_whip[1]))) \n\n# NLS model results in a table\nnls_male_whip_tidy <- tidy(nls_male_whip) %>% \n  select(-statistic) %>% \n  mutate(p.value = case_when(\n    p.value < 0.001 ~ \"<0.001\",\n    p.value > 0.001 ~ as.character(round(p.value, 4)))) %>% \n  kable(col.names = c(\"Parameter\", \"Coefficient\", \"Standard Error\", \"P-Value\"),\n        caption = \"Table 2. NLS analysis results for male western whiptail lizards. Data includes coefficients for the parameters, standard error, and the p-value.\",\n        digits = 4) %>% \n  kable_styling(full_width = FALSE)\n\nnls_male_whip_tidy \n\n\n\nTable 2: Table 2. NLS analysis results for male western whiptail lizards. Data includes coefficients for the parameters, standard error, and the p-value.\n\n\nParameter\n\n\nCoefficient\n\n\nStandard Error\n\n\nP-Value\n\n\nb\n\n\n2.3683\n\n\n0.1800\n\n\n<0.001\n\n\na\n\n\n0.0005\n\n\n0.0004\n\n\n0.2192\n\n\nVisualizing and Comparing NLS Models\n\n\nShow Code\n\n# To create model prediction based on NLS for subset\nmale_whip_augment <- augment(nls_male_whip)\n\nwhiptails_general <- data.frame(lizards, lizard_augment) %>% \n  filter(spp %in% c(\"CNTI\"), \n         sex %in% c(\"Male\"))\n\n# Comparing the output from the species specific nls model to the general nls model for all species by graphing the model fits on the male western whiptail data \nggplot() +\n  geom_point(data = male_whiptails, aes(\n             x = sv_length,\n             y = weight,\n             color = \"Data\")) +\n  geom_line(data = male_whip_augment, aes(\n            x = sv_length,\n            y = .fitted,\n            color = \"Male Whiptail Model\"),\n            size = 1) +\n  geom_line(data = whiptails_general, aes(\n            x = sv_length,\n            y = .fitted,\n            color = \"General Lizards Model\"),\n            size = 1) +\n  scale_color_manual(values = c(\"black\", \"aquamarine4\", \"deeppink4\")) +\n  theme_minimal() +\n  labs(x = \"Snout to Vent Length (mm)\", \n       y = \"Weight (g)\") +\n  theme(legend.title = element_blank(),\n        legend.position = \"bottom\")\n\n\n\nShow Code\n\n# Recording the RMSE for both models \nwhip_rmse <- rmse(nls_male_whip, data = male_whiptails) \nwhip_gen_rmse <- rmse(lizard_nls, data = male_whiptails) \n\n\n\nFigure 2. Lizard body weight (g) versus snout to vent length (mm) for male western whiptail lizards. The green line represents a general NLS model for all lizard species, while the red line represents the NLS model specifically trained for male western whiptail lizards. The RMSE for the general model is 3.562 while for the male whiptail specific model, the RMSE is 3.349. The lower RMSE score for the specific model indicates it is a better fit line for predicting data (in this case: weight as a function of snout to vent length). Data: Lightfoot & Whitford. (2020).\nData Citation\nLightfoot, D. and W.G. Whitford. 2020. Lizard pitfall trap data from 11 NPP study locations at the Jornada Basin LTER site, 1989-2006 ver 37. Environmental Data Initiative. https://doi.org/10.6073/pasta/4a6e258fb49c31e222ecbbcfd128967f\n\n\n\n",
    "preview": "posts/2022-03-13-nls/nls_files/figure-html5/unnamed-chunk-6-1.png",
    "last_modified": "2022-03-13T17:10:53-07:00",
    "input_file": {}
  },
  {
    "path": "posts/2022-03-13-textanalysis/",
    "title": "Text Wrangling and Sentiment Analysis",
    "description": "Performing text analysis to observe the most common used words in an article and the most sentiment of the words in the article.",
    "author": [
      {
        "name": "Devin Ngo",
        "url": {}
      }
    ],
    "date": "2022-03-13",
    "categories": [],
    "contents": "\nOverview\nSummary\nIn 2018, Michelle Zauner wrote an essay for The New Yorker about her connections with the Korean supermarket, H Mart, to her late mother. This piece titled “Crying in H Mart” later turned into a full book that debuted on the The New York Times nonfiction best-seller list. Text analysis will be performed on the original New Yorker article to find the most common words in this article to be put into a word cloud. Furthermore, sentiment analysis will be done on the text using the NRC Emotion Lexicon. The NRC Emotion Lexicon is a list that associates English words to two sentiments (negative and positive) and eight basic emotions (anger, fear, anticipation, trust, surprise, sadness, joy, and disgust).\nCrying in H Mart, 2018. Illustration by Andrea MongiaCitation\nZauner, M. (2018, August 20). Crying in H Mart. The New Yorker. Retrieved March 6, 2022, from https://www.newyorker.com/culture/culture-desk/crying-in-h-mart\nSetup\n\n\nShow Code\n\nknitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE)\n\nlibrary(tidyverse)\nlibrary(tidytext)\nlibrary(textdata)\nlibrary(pdftools)\nlibrary(ggwordcloud)\nlibrary(here)\n\n\n\n\n\nShow Code\n\n# Reading in text\nhmart_text <- pdf_text(here(\"_posts\", \"2022-03-13-textanalysis\", \"data\", \"crying_in_hmart.pdf\"))\n\n\n\nText Wrangling\n\n\nShow Code\n\n# Breaking text down into pages and lines\nhmart_lines <- data.frame(hmart_text) %>% \n  mutate(page = 1:n()) %>% \n  mutate(full_text = str_split(hmart_text, pattern = '\\\\n')) %>% \n  unnest(full_text) %>% \n  mutate(full_text = str_squish(full_text))\n\n\n\n\n\nShow Code\n\n# Retrieving word counts and wrangling to get rid of stop words\nhmart_words <- hmart_lines %>% \n  unnest_tokens(word, full_text, token = 'words') %>% \n  select(-hmart_text) \n\nhmart_wordcount <- hmart_words %>% \n  count(word) \n\nhmart_words_clean <- hmart_words %>%\n  anti_join(stop_words, by = \"word\") \n  \nnonstop_counts <- hmart_words_clean %>% \n  count(word)\n\n\n\nWord Cloud\n\n\nShow Code\n\n# Creating a word cloud of the most frequent 100 words\nhmart_top100 <- nonstop_counts %>% \n  arrange(-n) %>% \n  slice(1:100)\n\nhmart_cloud <- ggplot(data = hmart_top100, aes(label = word)) +\n  geom_text_wordcloud(aes(color = n, size = n), shape = 'diamond') +\n  scale_size_area(max_size = 6) +\n  scale_colour_gradientn(colors = c('lightblue3', 'lightblue4', 'midnightblue'))\n\nhmart_cloud\n\n\n\n\nFigure 1. Word cloud of the 100 most frequent words in the article, excluding stop words. Data: Zauner (2018).\nTakeaways:\nThe most common word found in the article was “Korean”, showing the emphasis on Korean culture linked between Zauner’s Korean mother, Korean food, and the Korean supermarket, H Mart\nA lot of the words repeating were associated with food including “food” itself as well as “noodles”, “rice”, “pork”, “banchan”, and “eating”\nOther repeating words included “mom” and “mother”, given the subject matter of her article. “Family”, “country”, and “asian” are a few of the common words that also indicate how this article deals with Zauner’s identity and culture\nSentiment Analysis\n\n\nShow Code\n\n# Retrieving NRC sentiments and getting NRC sentiment word counts\nhmart_nrc <- hmart_words_clean %>% \n  inner_join(get_sentiments('nrc'))\n\nhmart_nrc_counts <- hmart_nrc %>% \n  count(sentiment) %>% \n  arrange(-n) \n\n# Plotting the results of NRC sentiment analysis\nggplot(hmart_nrc_counts, \n       aes(x = fct_reorder(sentiment, n), y = n, fill = n)) +\n  geom_col() +\n  coord_flip() +\n  scale_fill_gradientn(colors = c(\"pink\", \"pink1\", \"pink2\")) + \n  theme_minimal() +\n  theme(legend.position = \"none\") +\n  labs(x = \"Sentiment\", y = \"Count\")\n\n\n\n\nFigure 2. Counts of words associated with two sentiments (negative and positive) and eight basic emotions (anger, fear, anticipation, trust, surprise, sadness, joy, and disgust) based on the NRC Emotion Lexicon. Data: Zauner (2018).\nTakeaways:\nDespite the article dealing with grief, there were more counts of words with positive associations than negative. This possibly correlates with Zauner’s fond memories of her mother being more present in the article rather than discussing her mother’s death\nWords associated with trust, joy, and anticipation also correlate to Zauner’s relationship with her mother\nWords with negative associations, along with those that are associated with sadness and fear are unsurprisingly present considering the sensitive subject matter of the article\n\n\n\n",
    "preview": "posts/2022-03-13-textanalysis/textanalysis_files/figure-html5/unnamed-chunk-4-1.png",
    "last_modified": "2022-03-14T10:46:47-07:00",
    "input_file": "textanalysis.knit.md"
  },
  {
    "path": "posts/2022-02-22-snowshoehares/",
    "title": "Linear Regression Exploration",
    "description": "Using linear regression analysis to explore and compare juvenile snowshoe hare variables",
    "author": [
      {
        "name": "Devin Ngo",
        "url": {}
      }
    ],
    "date": "2022-02-22",
    "categories": [],
    "contents": "\n\n\n\n1. Introduction\nThis report explores data on juvenile snowshoe hares, including the sex, weight, trap site, and hind foot length. The hares were observed as a part of a Long Term Ecological Research (LTER) study from 1999 - 2012 (Kielland et. al. (2017)) in the Bonanza Creek Experimental Forest. First, this report looks at annual juvenile hare trap counts. Then it visualizes juvenile hare weights by sex and trap site. Finally, it analyzes the relationship between hare weight and hind foot length.\n2. Data and Analyses\nData on snowshoe hares was provided by the Bonanza Creek Long Term Ecologicial Research (LTER) group in a study done by Kielland et. al. (2017). This study was conducted in the Bonanza Creek Experimental Forest from 1999 to 2012, splitting up into three different sites (Bonanza Riparian (bonrip) , site in a mature lowland black spruce stand (bonbs), and Bonanza Mature (bonmat)). The data contains 3197 observations for 14 variables including sex, age, weight (grams), hind foot length (mm), and grid (trap site). Weights between male and female juvenile hares are compared by two-sample t-tests with a significance level (\\(\\alpha\\)) of 0.05 throughout. Group differences are described by Cohen’s d effect size. A simple linear regression is used to explore the relationship between hind foot length and weight. All analyses are conducted using R version 4.1.1 and RStudio Version 1.4.1717.\n3. Juvenile Hare Initial Investigation\nI. Annual Juvenile Hare Trap Counts\n\n\n\nFigure 1. Annual juvenile hare trap counts from 1999 to 2012. Data: Kielland et al. (2017).\nTakeaways: The minimum count of juvenile hare trappings is 2 and the maximum is 126. The mean is 31.5 and the median is 18.5. It seems that juvenile hare trappings started high initially but eventually lowered and began varying in count. To standardize the juvenile hare population in future analyses, there should be consistency where the same number of traps are set the same each year, as well as on the same days.\nII. Visualizing Juvenile Hare Weights\n\n\n\nFigure 2. Juvenile hare weight comparisons by sex and site. Looks at the distribution of juvenile hare weight sizes for female, male, and unknown sexes, separated by site. The box endpoints display the 25th and 75th percentile values while the box lines indicates the median value and the black point indicates the mean value for the hares. Data: Kielland et al. (2017).\nIII. Juvenile Weight Comparison (Male & Female Snowshoe Hares)\n\n\n\nTable 1. Descriptive statistics including the mean, standard deviation, and sample size for juvenile hares weights, separated by sex. Data: Kielland et al. (2017).\n\n\nSex\n\n\nMean Weight (g)\n\n\nStandard Deviation of Weight (g)\n\n\nSample Size (n)\n\n\nFemale\n\n\n855.39\n\n\n292.25\n\n\n197\n\n\nMale\n\n\n945.86\n\n\n333.22\n\n\n163\n\n\nMeans Comparison: On average, mean weight of male hares is greater than the weight of female hares. The actual difference in means between male and female hares is 90.47, which gives a percent difference of 10.05%. The difference in means is significant (Welch’s two-sample t-test: t(325.02) = -2.71, p = 0.007). There is also a small effect size (Cohen’s d = -0.29).\nIV. Relationship Between Juvenile Weight & Hind Foot Length\n\n\n\nFigure 3. Relationship between hind foot length (mm) and weight (g) for juvenile hares, both male and female, as well as those with an unknown sex. The points indicate individual hare measurements where purple = female juvenile hares, blue = male juveline hares; gray = juvenile hares of an unknown sex). Linear model summary: \\(\\beta\\)1 = 9.52 g mm-1, p < 0.001, R2 = 0.3, Pearson’s r = 0.55. Data: Kielland et al. (2017).\nOutcome of linear regression exploration: Hare weight and hind foot length appear to have a relatively linear relationship for both sexes of hares. Simple linear regression reveals that hind foot length can predict hare weight (p < 0.001, R2 = 0.3) with an average slope of \\(\\beta\\) = 9.52 g mm-1. However, this R2 value is not necessarily strong as hind foot length (mm) variation can only explain 30% of the weight (g) variation in our data. For every one mm increase in hind foot length, on average we can expect hare weight to increase by 9.52 g. There is a moderate, significant, and positive correlation between hind foot length and hare weight (Pearson’s r = 0.55, p < 0.001). Diagnostic plots show the data having a heteroscedastic spread of residuals, which is a concern and indicates further analysis needs to be done.\n4. Summary\nExploratory data analysis reveals the following initial findings:\nFor all trapping sites, the male snowshoe hare mean weight was found to be larger than the female snowshoe hare mean weight (the difference is significant, and the effect size is small).\nWhile there is a slight positive linear relationship between hare weight and hind foot length, it was determined by the R2 that only 30% of weight variance can be explained by hind feet length variance.\nOn average, when hind foot length increases by one mm, we can expect hare weight to increase by 9.52 g.\nThere is a moderate, significant, and positive correlation between hind foot length and hare weight (Pearson’s r = 0.55, p < 0.001), but residuals show a heteroscedastic spread.\nNext Steps:\nFurther data analysis needs to be conducted since data appears to be heteroscedastic.\nStandardize the juvenile hare population in future analyses by setting the same number of traps each year on the same days.\n5. Citations\nKielland, K., F.S. Chapin, R.W. Ruess, and Bonanza Creek LTER. 2017. Snowshoe hare physical data in Bonanza Creek Experimental Forest: 1999-Present ver 22. Environmental Data Initiative. https://doi.org/10.6073/pasta/03dce4856d79b91557d8e6ce2cbcdc14\n\n\n\n",
    "preview": "posts/2022-02-22-snowshoehares/snowshoehares_files/figure-html5/unnamed-chunk-2-1.png",
    "last_modified": "2022-03-13T17:10:06-07:00",
    "input_file": {}
  },
  {
    "path": "posts/2022-01-21-welcome/",
    "title": "Welcome",
    "description": "Welcome to my personal website!",
    "author": [
      {
        "name": "Devin Ngo",
        "url": {}
      }
    ],
    "date": "2022-02-06",
    "categories": [],
    "contents": "\nWelcome to my personal website where I will be tracking the progress I make entering the world of data science! I first began learning R in my first quarter of graduate school at UCSB Bren School of Environmental Science and Management, through a course on data analysis. I am currently taking another course this quarter to further advance my skills in data anlaysis and using R.\n\n\n\n",
    "preview": {},
    "last_modified": "2022-02-22T01:07:41-08:00",
    "input_file": {}
  }
]
